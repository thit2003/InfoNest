{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Thit Lwin Win Thant\\\\Downloads\\\\InfoNest\\\\InfoNest-Frontend\\\\src\\\\components\\\\GoogleSignIn.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport { BACKEND_API_BASE } from '../config';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GoogleSignIn = ({\n  onSuccess,\n  onError,\n  buttonText = 'Continue with Google'\n}) => {\n  _s();\n  const scriptLoadedRef = useRef(false);\n  const [loading, setLoading] = useState(false);\n  const loadScript = () => {\n    return new Promise((resolve, reject) => {\n      if (document.getElementById('google-identity-script')) return resolve();\n      const script = document.createElement('script');\n      script.src = 'https://accounts.google.com/gsi/client';\n      script.id = 'google-identity-script';\n      script.async = true;\n      script.defer = true;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  };\n  useEffect(() => {\n    let cancelled = false;\n    async function init() {\n      try {\n        await loadScript();\n        if (cancelled) return;\n        if (!window.google || !process.env.REACT_APP_GOOGLE_CLIENT_ID) return;\n        window.google.accounts.id.initialize({\n          client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n          callback: async response => {\n            if (!response.credential) {\n              onError && onError('No credential from Google.');\n              return;\n            }\n            try {\n              setLoading(true);\n              const r = await axios.post(`${BACKEND_API_BASE}/auth/google`, {\n                idToken: response.credential\n              });\n              if (r.data && r.data.success) {\n                onSuccess && onSuccess(r.data);\n              } else {\n                onError && onError(r.data.error || 'Google auth failed.');\n              }\n            } catch (e) {\n              console.error(e);\n              onError && onError('Network error during Google auth.');\n            } finally {\n              setLoading(false);\n            }\n          },\n          ux_mode: 'popup',\n          auto_select: false\n        });\n      } catch (err) {\n        console.error('Google script load failed', err);\n        onError && onError('Google script failed to load.');\n      }\n    }\n    if (!scriptLoadedRef.current) {\n      scriptLoadedRef.current = true;\n      init();\n    }\n    return () => {\n      cancelled = true;\n    };\n  }, [onSuccess, onError]);\n  const handleClick = () => {\n    if (!window.google) {\n      onError && onError('Google not ready yet.');\n      return;\n    }\n    window.google.accounts.id.prompt();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: '15px'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: handleClick,\n      disabled: loading,\n      style: {\n        width: '100%',\n        padding: '10px',\n        backgroundColor: '#fff',\n        border: '1px solid #4285F4',\n        color: '#4285F4',\n        fontWeight: 'bold',\n        borderRadius: '4px',\n        cursor: 'pointer',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: '8px'\n      },\n      children: loading ? 'Authenticating...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"Google\",\n          src: \"https://developers.google.com/identity/images/g-logo.png\",\n          style: {\n            width: 18,\n            height: 18\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), buttonText]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(GoogleSignIn, \"5tiY/UJzaE5BcbeRwe09SIeLswY=\");\n_c = GoogleSignIn;\nexport default GoogleSignIn;\nvar _c;\n$RefreshReg$(_c, \"GoogleSignIn\");","map":{"version":3,"names":["React","useEffect","useRef","useState","axios","BACKEND_API_BASE","jsxDEV","_jsxDEV","Fragment","_Fragment","GoogleSignIn","onSuccess","onError","buttonText","_s","scriptLoadedRef","loading","setLoading","loadScript","Promise","resolve","reject","document","getElementById","script","createElement","src","id","async","defer","onload","onerror","head","appendChild","cancelled","init","window","google","process","env","REACT_APP_GOOGLE_CLIENT_ID","accounts","initialize","client_id","callback","response","credential","r","post","idToken","data","success","error","e","console","ux_mode","auto_select","err","current","handleClick","prompt","style","marginTop","children","type","onClick","disabled","width","padding","backgroundColor","border","color","fontWeight","borderRadius","cursor","display","alignItems","justifyContent","gap","alt","height","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Thit Lwin Win Thant/Downloads/InfoNest/InfoNest-Frontend/src/components/GoogleSignIn.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { BACKEND_API_BASE } from '../config';\r\n\r\nconst GoogleSignIn = ({ onSuccess, onError, buttonText = 'Continue with Google' }) => {\r\n  const scriptLoadedRef = useRef(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const loadScript = () => {\r\n    return new Promise((resolve, reject) => {\r\n      if (document.getElementById('google-identity-script')) return resolve();\r\n      const script = document.createElement('script');\r\n      script.src = 'https://accounts.google.com/gsi/client';\r\n      script.id = 'google-identity-script';\r\n      script.async = true;\r\n      script.defer = true;\r\n      script.onload = resolve;\r\n      script.onerror = reject;\r\n      document.head.appendChild(script);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function init() {\r\n      try {\r\n        await loadScript();\r\n        if (cancelled) return;\r\n        if (!window.google || !process.env.REACT_APP_GOOGLE_CLIENT_ID) return;\r\n\r\n        window.google.accounts.id.initialize({\r\n          client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\r\n          callback: async (response) => {\r\n            if (!response.credential) {\r\n              onError && onError('No credential from Google.');\r\n              return;\r\n            }\r\n            try {\r\n              setLoading(true);\r\n              const r = await axios.post(`${BACKEND_API_BASE}/auth/google`, {\r\n                idToken: response.credential\r\n              });\r\n              if (r.data && r.data.success) {\r\n                onSuccess && onSuccess(r.data);\r\n              } else {\r\n                onError && onError(r.data.error || 'Google auth failed.');\r\n              }\r\n            } catch (e) {\r\n              console.error(e);\r\n              onError && onError('Network error during Google auth.');\r\n            } finally {\r\n              setLoading(false);\r\n            }\r\n          },\r\n          ux_mode: 'popup',\r\n          auto_select: false\r\n        });\r\n      } catch (err) {\r\n        console.error('Google script load failed', err);\r\n        onError && onError('Google script failed to load.');\r\n      }\r\n    }\r\n    if (!scriptLoadedRef.current) {\r\n      scriptLoadedRef.current = true;\r\n      init();\r\n    }\r\n    return () => { cancelled = true; };\r\n  }, [onSuccess, onError]);\r\n\r\n  const handleClick = () => {\r\n    if (!window.google) {\r\n      onError && onError('Google not ready yet.');\r\n      return;\r\n    }\r\n    window.google.accounts.id.prompt();\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginTop: '15px' }}>\r\n      <button\r\n        type=\"button\"\r\n        onClick={handleClick}\r\n        disabled={loading}\r\n        style={{\r\n          width: '100%',\r\n            padding: '10px',\r\n            backgroundColor: '#fff',\r\n            border: '1px solid #4285F4',\r\n            color: '#4285F4',\r\n            fontWeight: 'bold',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            gap: '8px'\r\n        }}\r\n      >\r\n        {loading ? 'Authenticating...' : (\r\n          <>\r\n            <img\r\n              alt=\"Google\"\r\n              src=\"https://developers.google.com/identity/images/g-logo.png\"\r\n              style={{ width: 18, height: 18 }}\r\n            />\r\n            {buttonText}\r\n          </>\r\n        )}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleSignIn;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}